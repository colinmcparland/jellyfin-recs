<div id="musicDiscoveryConfigPage" data-role="page"
     class="page type-interior pluginConfigurationPage"
     data-require="emby-input,emby-button,emby-checkbox,emby-select"
     data-controller="__plugin/MusicDiscoveryConfig.js">
  <div data-role="content">
    <div class="content-primary">
      <h2>Music Discovery Settings</h2>

      <div id="jsInjectorWarning" style="display:none; padding:1em; margin-bottom:1.5em; border-radius:4px; background:rgba(255,152,0,0.15); border:1px solid rgba(255,152,0,0.4);">
        <strong>JavaScript Injector plugin required</strong>
        <p style="margin:0.5em 0 0;">
          The discovery panel needs the
          <a href="https://github.com/n00bcodr/Jellyfin-JavaScript-Injector" target="_blank" rel="noopener noreferrer">JavaScript Injector</a>
          plugin to load scripts into the Jellyfin web UI.
          Install it from the plugin catalog, then restart Jellyfin.
        </p>
      </div>

      <form id="musicDiscoveryConfigForm">
        <div class="inputContainer">
          <label class="inputLabel inputLabelUnfocused" for="txtLastFmApiKey">
            Last.fm API Key
          </label>
          <input is="emby-input" type="text" id="txtLastFmApiKey" />
          <div class="fieldDescription">
            Get a free API key at <a href="https://www.last.fm/api/account/create" target="_blank">last.fm/api</a>.
            Required for recommendations to work.
          </div>
        </div>

        <div class="inputContainer">
          <label class="inputLabel inputLabelUnfocused" for="selMaxResults">
            Max Recommendations
          </label>
          <select is="emby-select" id="selMaxResults">
            <option value="5">5</option>
            <option value="8">8</option>
            <option value="10">10</option>
          </select>
        </div>

        <div class="inputContainer">
          <label class="inputLabel inputLabelUnfocused" for="txtCacheDuration">
            Cache Duration (minutes)
          </label>
          <input is="emby-input" type="number" id="txtCacheDuration" min="5" max="1440" />
          <div class="fieldDescription">
            How long to cache recommendations before re-fetching from Last.fm.
          </div>
        </div>

        <h3>Enable Discovery Panel For:</h3>
        <div class="checkboxContainer checkboxContainer-withDescription">
          <label class="emby-checkbox-label">
            <input is="emby-checkbox" type="checkbox" id="chkEnableArtists" />
            <span>Artists</span>
          </label>
        </div>
        <div class="checkboxContainer checkboxContainer-withDescription">
          <label class="emby-checkbox-label">
            <input is="emby-checkbox" type="checkbox" id="chkEnableAlbums" />
            <span>Albums</span>
          </label>
        </div>
        <div class="checkboxContainer checkboxContainer-withDescription">
          <label class="emby-checkbox-label">
            <input is="emby-checkbox" type="checkbox" id="chkEnableTracks" />
            <span>Tracks</span>
          </label>
        </div>

        <div>
          <button is="emby-button" type="submit"
                  class="raised button-submit block emby-button">
            <span>Save</span>
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
